function showpins(){mShowPagedResults()}function GetPinData(){GetHotelPinData()}function fInitFilterflags(){}function getPropChainKeys(){return""}function typeinitResults(){}function _srchst(){var t=_gsrchst(new Object);return t.ChainKeys=getPropChainKeys(),t}
var aview="D",sort="",sorta=!1,nPerPage=20,nCPG=1,bIsHistory=!1,bCheckedHistory=!1,dataTry=0,rTitle="",rSubTitle="",bInteractive=!1,pnlListing,pnlListTitle,pks=new Array,sf=new Array,intSFvs=0,bMapView=!1,bCompareView=!1,bAllowCompare=!0,bInitload=!1,bCanRefresh=!1,bLoading=bMapView,expndmi=2,rhtml="",phtml="",chtml="",rcnt,destkeys="",oSearch,baseURL="",oState,sid="",selcmp="|",dn="",cpgk=0,bUseBounds=!1,baseKey=0,baseLat=-999,baseLong=-999,baseMapLat=-999,baseMapLong=-999,bLastDest="",bApplySTT=!0,sAKW="",cURL="";function HasAMap(){return"L"!=aview}function drpSel(e,t){trackView("Filter"+t,e.options[e.selectedIndex].text,"",!0,!0),resetMap()}function drpSelV(e,t){trackView("Filter"+t,e,"",!0,!0),resetMap()}function getListval(e){e=$("#"+e).find("input:checked").val();return e=null==e?"":e}function getListtext(e){e=$("#"+e).find("input:checked").next().html();return e=null==e?"":e}function resetMap(){saveState(!(nCPG=1)),mGetPinData()}function trackView(e,t,a,s,r){var i;""!=baseURL&&s&&(i=baseURL,""!=(s=parmstring())&&(i=appndURL(i,s)),bCompareView&&(i=appndURL(i,"cmp=1")),myTrackPageView(i,r,e)),myTrackEvent("ResNav",e,t,a)}function resetPgTitle(e){var t=$(e);0<t.length&&0<t.html().length&&(0<(e=t.html()).indexOf("- Page")&&t.html(e.substring(0,e.indexOf("- Page"))))}function mGetPinData(){bLoading||GetPinData()}function GetHotelMapData(){var e;oSearch&&(oSearch.View="M2",e={oSearch:oSearch,MapView:bMapView,CompareView:!1,AdKeyword:sAKW},DynaProxy.invoke("GetHotelPoints",e,function(e){parseRes(e,"HOTM")},AjaxFailed))}function GetHotelPinData(){var e;oSearch&&(clrRes(),0<(cURL=0<(cURL=location.href).indexOf("&pg=")?cURL.substring(0,cURL.indexOf("&pg=")):cURL).indexOf("?pg=")&&(cURL=cURL.substring(0,cURL.indexOf("?pg="))),1<nCPG&&(cURL=cURL+(0<cURL.indexOf("?")?"&":"?")+"pg="+nCPG),0<(e=document.title).indexOf("| Page")&&(e=e.substring(0,e.indexOf("| Page"))),1<nCPG&&(e=e+" | Page "+nCPG),history.pushState({Title:e},e,cURL),resetPgTitle($("[data-page-title]")),resetPgTitle($(".navbar-title span")),e={oSearch:oSearch,MapView:bMapView,CompareView:!1,AdKeyword:sAKW},DynaProxy.invoke("GetHotelPoints",e,function(e){parseRes(e,"HOT")},AjaxFailed))}function GetSeeDoPinData(){var e;oSearch&&(e={oSearch:oSearch},DynaProxy.invoke("GetSeeDoPoints",e,function(e){parseRes(e,"SNDO")},AjaxFailed))}function GetAirportPinData(){var e;oSearch&&(e={oSearch:oSearch},DynaProxy.invoke("GetAirportPoints",e,function(e){parseRes(e,"APT")},AjaxFailed))}function initPins(){"D"==aview?(saveState(!1),GetHotelMapData()):"H"==aview||resetMap()}function encodedBaseCtr(){var e="";try{e="#"+baseLat+"#"+baseLong}catch(e){}return e}function parseRes(e,t){if("HOTM"==t)Northstar.maps.addMarkers(e.JSONMapItems,!0),bSetPts=!1;else{rotateads(),rcnt=numberWithCommas(e.ResultCount),rhtml=e.HTMLList,chtml=e.HTMLCount,phtml=e.HTMLPages,rTitle=e.Title,rSubTitle=e.SubTitle,sf=new Array,sf=e.FlagsString.split("|"),fInitFilterflags(e),wr=e.WithReview,mypts=new Array,1<oSearch.CurrentPage?($("#resCount").html(e.HTMLCount),$(".venue-show-more").remove(),$("#resList").find("article:last").after(e.HTMLList),Northstar.venueSearch.resizeMap()):($("#resCount").html(e.HTMLCount),$("#resList").html(e.HTMLList)),""!=e.AdImpressions&&null!=e.AdImpressions&&$("#aim").html(e.AdImpressions),$(".slider-simple:not(.slick-initialized)").slick(),initResults(),1==oSearch.CurrentPage&&HasAMap()&&""!=e.JSONMapItems&&(Northstar.maps.addMarkers(e.JSONMapItems,!0),bSetPts=!1),bCanRefresh=!(bInitload=!1);try{saveState(!0)}catch(e){}bIsHistory=!1}}function parseNB(r,a){var ly;for(eval("ly=bSR"+a),ly=ly||[],eval("bSR"+a+"=ly"),dataTry=0,pins=new Array,mypts=new Array,x=0;x<r.Items.length;x++){var oLoc=r.Items[x],pin=new _pinFromLoc(oLoc),sTitle,ico,marker;pin.base||(pin.near=!0,-999!=pin.locs.latitude&&(sTitle=oLoc.PlaceName+"\n"+oLoc.Address,ico="/dist/images/p/"+a+".png",marker=new google.maps.Marker({position:pin.locs,map:map,icon:ico,title:sTitle}),ly.push(marker)))}eval("bSR"+a+"=ly"),"APT"==a&&-999<r.MinLong&&(mypts.push(new google.maps.LatLng(r.MinLat,r.MinLong)),mypts.push(new google.maps.LatLng(r.MaxLat,r.MaxLong)),setView(mypts))}function clrRes(){bInitload||bIsHistory||bMapView||$(".results-list").css({opacity:.3})}function mShowPagedResults2(){$("#resList").html(rhtml),rcnt=rhtml=null,""!=rTitle&&null!=rTitle&&($(".my-page-title").text(rTitle),document.title=rTitle),rTitle=rSubTitle=null,$(".pagination").html(phtml),$(".toolbar .results").html(chtml),chtml=phtml=null,bMapView||(isScrolledIntoView($("#list-top"))||$(document).scrollTop($("#list-top").offset().top),$(".results-list").css("opacity",""))}function mShowPagedResults(){mShowPins()}function defaultsort(e){return"mtgspc"==e||"room"==e||"cls"==e||"mtglsize"==e||"mtgrm"==e||"rating"==e?"desc":"asc"}function onlistsort(){var e=$("#drpHotelSort").val();ord=defaultsort(e),sorta==("asc"==ord)&&e==sort||(sorta="asc"==ord,trackView("FilterSort",(sort=e)+"_Asc:"+sorta.toString(),"",!0,!1),resetMap())}function saveState(e){bIsHistory||bInitload||(oSearch=new _srchst)&&(0<$("#myMapHolder").length&&$("#myMapHolder").append($("#myMap")),historyStorage&&(historyStorage.remove("osrch"),historyStorage.put("osrch",oSearch),e&&(oState=new _pgstate,historyStorage.remove("ostate"),historyStorage.put("ostate",oState))))}function dhtmlisten(e,t){oSearch=historyStorage.get("osrch"),oState=historyStorage.get("ostate"),restoreState()}function initdhtml(){window.dhtmlHistory.create({toJSON:function(e){return JSON.stringify(e)},fromJSON:function(e){return JSON.parse(e)}}),window.onload=initdhtml_f}function initdhtml_f(){dhtmlHistory.initialize(),dhtmlHistory.addListener(dhtmlisten),bCheckedHistory=!0}function _pgstate(){return HasAMap()&&(this.mapcenter=map.getCenter(),this.zoom=parseInt(map.getZoom()),baseMapLat=this.mapcenter.latitude,baseMapLong=this.mapcenter.longitude,baseZoom=this.zoom),this.destkeys=destkeys,this.baseKey=baseKey,this.address=dn,this}function _gsrchst(e){var t="",t=""!=destkeys?destkeys:baseKey;return e.SessionID=ccar,e.PageKey=cpgk,e.RequestURL=baseURL,e.DestinationPlacekeys=t,e.SearchRadius=0,e.CurrentPage=nCPG,e.View=aview,e.SortField=sort,e.SortAscending=sorta,e.Placekeys=pks,e.ReturnMapData=HasAMap(),e.SearchId=sid,e.Selected=selcmp,e.AllowCompare=bAllowCompare,e.Center=encodedBaseCtr(),e.UseBounds=bUseBounds,e.ProcessSTTItems=bApplySTT,HasAMap()&&(map.getBounds(),e.MapZoom=parseInt(map.getZoom()),e.MapWidth=map.getDiv().clientWidth,e.MapHeight=map.getDiv().clientHeight,e.SearchBounds=GetBounds(),baseZoom=e.MapZoom),e}function grestoreState(){if(oState&&(bIsHistory=!0,""!=oState.MyResultsPage&&($(".browse-results-nav").find(".c-01-count").html(oState.MyCount),$(".browse-results-nav").children(".c-02").html(oState.MyResultsPage),$(".browse-results-nav").children(".c-02a").html(oState.MyResultsPage2),sf=oState.sf,destkeys=oState.destkeys,baseKey=oState.baseKey,dn=oState.address)),oSearch){if(destkeys=oSearch.DestinationPlacekeys,nCPG=oSearch.CurrentPage,aview=oSearch.View,sort=oSearch.SortField,sorta=oSearch.SortAscending,pks=oSearch.Placekeys,selcmp=oSearch.Selected,sid=oSearch.SearchId,cpgk=oSearch.PageKey,ccar=oSearch.SessionID,bApplySTT=oSearch.ProcessSTTItems,bAllowCompare=oSearch.AllowCompare,bUseBounds=oSearch.UseBounds,""!=oSearch.Center&&(baseLat=oSearch.Center.split("#")[1],baseLong=oSearch.Center.split("#")[2]),bMapView){baseZoom=oState.zoom,baseMapLat=oState.mapcenter.latitude,baseMapLong=oState.mapcenter.longitude;try{if(map){map.setView({center:new google.maps.LatLng(baseMapLat,baseMapLong),zoom:baseZoom});try{initBase()}catch(e){}}}catch(e){}}bIsHistory&&mGetPinData()}}function initResults(){$(".namelink[_aid]").click(function(){var e=$(this).parents(".result").index()+1,e="/ad?aid="+$(this).attr("_aid")+"&ctu="+escape($(this).attr("href"))+"&pgk="+cpgk+"&pos="+e.toString()+"&rfu="+escape(window.location.href);return winloc(e),!1}),typeinitResults()}function swapView(e){saveState();var t=parmstring();""!=t&&(e=appndURL(e,t)),winloc(e)}$(document).ready(function(){$(document).on("click",".venue-show-more",function(){var e=parseInt($(this).attr("_p"));if(bApplySTT=!1,e!=nCPG&&0!=e){trackView("FilterPage",e,"",!0,!1),nCPG=e;try{saveState(!1)}catch(e){}mGetPinData(!1)}return!1}),initResults(),$("#drpHotelSort").change(function(){onlistsort()}),$(document).on("click",".venue-view a",function(){var e=$(this).attr("_view");return e==aview&&$(this).hasClass("active")||("M"==(aview=e)?$(".venue-list-wrapper").removeClass("view-list").addClass("fullsize-map").removeClass("view-gallery"):"L"==aview?$(".venue-list-wrapper").addClass("view-gallery").removeClass("fullsize-map").removeClass("view-list"):$(".venue-list-wrapper").addClass("view-list").removeClass("fullsize-map").removeClass("view-gallery"),$(".venue-view a").removeClass("active"),$(this).addClass("active"),trackView("SwitchView",aview,"",!0,!1),resetMap()),!1}),$(document).on("click touchstart","body",function(e){var t=$(this).find(".venue-card.preview");t.length&&(t.hide(),$(".find-venue-results").removeClass("disabled"))}),$(document).on("click",".view-gallery .venue-preview",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).closest(".venue-card:not(.preview)"),e=t.find(".venue-card.preview");return e.length?e.show():(e=t.clone(),t.append(e.addClass("preview"))),e.on("click touchstart",function(e){e.stopPropagation()}),e.find(".cmp-venue").first().off().on("click touchstart",function(e){return t.find(".cmp-venue").first().click(),!1}),e.find(".add-to-collection").first().off().on("click touchstart",function(e){return t.find(".add-to-collection").first().click(),!1}),e.find(".gate-collection").first().off().on("click touchstart",function(e){return t.find(".gate-collection").first().click(),!1}),e.find(".bottom-request-proposal .rfp-venue").first().off().on("click touchstart",function(e){return t.find(".rfp-venue").first().click(),!1}),$(".find-venue-results").addClass("disabled"),Northstar.venuePreviews.position(),!1}),$(".view-gallery .d-none.d-lg-block").addClass("w-100")});
var map=null,pins=new Array,bSetPts=!0,baseZoom=1,basepin=null,baseTyp=null,bOnDemand=!1,sf,wr=0,lay1,laybase,bSRAPT=null,bSRHOT=null,bSRSNDO=null,bSRDIN=null,bMapLoaded=!1,markers=[],initMarkers=null;function showRel(bState,relType){var ly;if(eval("ly=bSR"+relType),bState)if(ly)for(var i=0;i<ly.length;i++)ly[i].setMap(map);else{var req=new Object;req.Type=relType,req.Latitude=baseLat,req.Longitude=baseLong;var DTO={Req:req};DynaProxy.invoke("GetNearbyPoints",DTO,function(e){parseNB(e,relType)},AjaxFailed)}else for(var i=0;i<ly.length;i++)ly[i].setMap(null)}function _pinFromDet(e,n,t,a,i,o){this.Placekey=e,this.locs=new google.maps.LatLng(t,a),this.base=e==baseKey,this.typ=n,this.html=i,this.near=!1,this.addr=o}function _pinFromLoc(e){this.Placekey=e.PlaceKey,this.locs=new google.maps.LatLng(e.Latitude,e.Longitude),this.base=e.PlaceKey==baseKey,this.typ=e.Type,this.near=!1,this.loc=e}function pushpinclickdrill(e){var t,n=e.ClusteredViewPort;null!=n&&""!=n?(n=port.split(","),mypts=new Array,mypts.push(new google.maps.LatLng(n[0],n[1])),mypts.push(new google.maps.LatLng(n[2],n[3])),t=new google.maps.LatLngBounds,$(mypts).each(function(e,n){t.extend(n)}),map.fitBounds(t),mapmoveEnd()):(map.setCenter(new google.maps.LatLng(e.Latitude,e.Longitude)),map.setZoom(map.getZoom()+2))}function hidepushpindetail(){$(".si-close-button").trigger("click")}function mapmoveEnd(){if(!bInitload&&bCanRefresh)return bUseBounds=!0,resetMap(),!1}function mapzoomEnd(){if(hidepushpindetail(),!bInitload&&bCanRefresh)return bUseBounds=!0,resetMap(),!1}function mAddMapPin(e,n,t,a,i){}function createCirclePushpin(e,n,t,a,i){return a=a||0,{path:google.maps.SymbolPath.CIRCLE,fillColor:n,fillOpacity:i,scale:e,strokeColor:t,strokeWeight:a}}function AddMapPin(e,n){if(e)return mAddMapPin(e,!1,!1,!1,n)}function AddMapPinLayer(e,n){if(e)return mAddMapPin(e,!1,n,!1,-1)}function MapDispose(){(pins=null)!=map&&(map.dispose(),map=null)}function setView(e){var t;bIsHistory||bSetPts&&0<e.length&&(t=new google.maps.LatLngBounds,$(e).each(function(e,n){t.extend(n)}),map.fitBounds(t),bSetPts=!1)}function GetBounds(){var e=new Array;if(null==map)return"";var n=map.getBounds();if(null==n)return"";var t=n.getSouthWest(),n=n.getNorthEast();return null==t||null==n?"":(e.push(new google.maps.LatLng(n.lat(),t.lng())),e.push(new google.maps.LatLng(t.lat(),n.lng())),createEncodings(e))}function delmapLayer(){}function maplayer(e){}function baselayer(){}function mShowPins(){for(var e=new Array,n=0;n<pins.length;n++){var t=AddMapPin(pins[n],n);t&&e.push(t)}}function fMPop(e){return""==e?null:e="<div class='map-pop'>"+e+"</div>"}function initjqpins(){$(".cluster-zoom").click(function(){return hidepushpindetail(),pushpinclickdrill($(this).attr("data-clustered-pts")),!1})}var nNavoffset=60;function mGetMap(){var e;bIsHistory?(mGetPinData(),bSetPts=!1):(initpins(),0<$("#map-init-pins").length&&(e=$("#map-init-pins").html(),console.log(e),e&&""!=e&&Northstar.maps.addMarkers(e,!0))),saveState(!0)}function mapLoaded(e){map=e,loadmap(),bLoading=!1,bInitload=!0,window.setTimeout(mGetMap,500)}function encodeSignedNumber(e){var n=e<<1;return encodeNumber(n=e<0?~n:n)}function encodeNumber(e){for(var n="";32<=e;)n+=String.fromCharCode(63+(32|31&e)),e>>=5;return n+=String.fromCharCode(e+63)}function createEncodings(e){for(var n=0,t=0,a=0,i="",n=0;n<e.length;++n){var o=e[n],r=o.lat(),o=o.lng(),r=Math.floor(1e5*r),o=Math.floor(1e5*o);dlat=r-t,dlng=o-a,t=r,a=o,i+=encodeSignedNumber(dlat)+encodeSignedNumber(dlng)}return i}$(document).ready(function(){Northstar.maps.loadMapAPI(mapLoaded),$(".show-rel input").on("click",function(){showRel($(this).prop("checked"),$(this).val())})});
//# sourceMappingURL=map/hotelmap.min.js.map
